# Adding-Ruby-Furigana-To-Japanese-Lyrics-In-MediaWiki
This is a Python3 script for creating Japanese lyric furigana in MoegirlPedia or any Mediawiki site you want. 

It requires Mecab (http://taku910.github.io/mecab/) to work.

You need to create a text file named "test.txt" in UTF-8 coding and copy the original lyrics there.

You have to modify the prefix and suffix to suit your own need.

In regular MediaWiki you may want to use ``{{ruby|word|read}}``

IMPORTANT NOTICE: 
* Photrans(V2).py yields a better result.
* ALL THE FURIGANA GENERATED BY THE SCRIPT NEED MANUAL CHECKING (Same for Photrans(V2).py).

Since the context info was lost because of the program design, MeCab sometimes cannot generate appropriate furigana.

But it is quite a relief compared to manually adding furigana and MediaWiki templates to the lyric.

You can copy the generated lyrics from the console.

## The original input in test.txt
```
光をあつめて
夜空の彼方へ

さよならの想い出を
瞳にたたえて　見つめる夢　遠く
壊れてしまう　うたかたのメモリー
寂しさの涙　そっと拭こう

伸ばした手は観覧車　優しくとらえて
目覚めそうな　記憶の欠片
うつむいて　消えてほしいと 祈るけど

君が見つけてくれた この声を
動き出した時計の針
世界はやがて色づいて
プラスティックな 心が輝き出すよ
忘れないで　おぼえていて
いつかまた巡り会える日まで
ずっと
```
## The output in console (For photrans(V2).py)
* You need https://github.com/MikimotoH/furigana to make V2 work.
* Put text to test.txt(or any filename you designated in the program), you'll see html format being printed out.
* Then copy the html format to test2.txt(or any filename you designated in the program), and run reph()
* If you familiar with Japanese, you will notice the result may some errors. So that is why you need to manually correct them.
```
[evaluate photrans (V2).py]
<ruby><rb>光</rb><rt>ひかり</rt></ruby>をあつめて
<ruby><rb>夜空</rb><rt>よぞら</rt></ruby>の<ruby><rb>彼方</rb><rt>かなた</rt></ruby>へ

さよならの<ruby><rb>想</rb><rt>おも</rt></ruby>いを
<ruby><rb>瞳</rb><rt>ひとみ</rt></ruby>にたたえて　<ruby><rb>見</rb><rt>み</rt></ruby>つめる<ruby><rb>夢</rb><rt>ゆめ</rt></ruby>　<ruby><rb>遠</rb><rt>とお</rt></ruby>く
<ruby><rb>壊</rb><rt>こわ</rt></ruby>れてしまう　うたかたのメモリー
<ruby><rb>寂</rb><rt>さび</rt></ruby>しさの<ruby><rb>涙</rb><rt>なみだ</rt></ruby>　そっと<ruby><rb>拭</rb><rt>ふ</rt></ruby>こう

<ruby><rb>伸</rb><rt>の</rt></ruby>ばした<ruby><rb>手</rb><rt>て</rt></ruby>は<ruby><rb>観覧</rb><rt>かんらん</rt></ruby><ruby><rb>車</rb><rt>しゃ</rt></ruby>　<ruby><rb>優</rb><rt>やさ</rt></ruby>しくとらえて
<ruby><rb>目</rb><rt>め</rt></ruby><ruby><rb>覚</rb><rt>ざ</rt></ruby>めそうな　<ruby><rb>記憶</rb><rt>きおく</rt></ruby>の<ruby><rb>欠片</rb><rt>かけら</rt></ruby>
うつむいて　<ruby><rb>消</rb><rt>き</rt></ruby>えてほしいと<sp><ruby><rb>祈</rb><rt>いの</rt></ruby>るけど

<ruby><rb>君</rb><rt>きみ</rt></ruby>が<ruby><rb>見</rb><rt>み</rt></ruby>つけてくれた<sp>この<ruby><rb>声</rb><rt>こえ</rt></ruby>を
<ruby><rb>動</rb><rt>うご</rt></ruby>き<ruby><rb>出</rb><rt>だ</rt></ruby>した<ruby><rb>時計</rb><rt>とけい</rt></ruby>の<ruby><rb>針</rb><rt>はり</rt></ruby>
<ruby><rb>世界</rb><rt>せかい</rt></ruby>はやがて<ruby><rb>色</rb><rt>いろ</rt></ruby>づいて
プラスティックな<sp><ruby><rb>心</rb><rt>しん</rt></ruby>が<ruby><rb>輝</rb><rt>かがや</rt></ruby>き<ruby><rb>出</rb><rt>だ</rt></ruby>すよ
<ruby><rb>忘</rb><rt>わす</rt></ruby>れないで　おぼえていて
いつかまた<ruby><rb>巡</rb><rt>めぐ</rt></ruby>り<ruby><rb>会</rb><rt>あ</rt></ruby>える<ruby><rb>日</rb><rt>ひ</rt></ruby>まで
ずっと

>>>reph()
{{Photrans|光|ひかり}}をあつめて
{{Photrans|夜空|よぞら}}の{{Photrans|彼方|かなた}}へ

さよならの{{Photrans|想|おも}}いを
{{Photrans|瞳|ひとみ}}にたたえて　{{Photrans|見|み}}つめる{{Photrans|夢|ゆめ}}　{{Photrans|遠|とお}}く
{{Photrans|壊|こわ}}れてしまう　うたかたのメモリー
{{Photrans|寂|さび}}しさの{{Photrans|涙|なみだ}}　そっと{{Photrans|拭|ふ}}こう

{{Photrans|伸|の}}ばした{{Photrans|手|て}}は{{Photrans|観覧|かんらん}}{{Photrans|車|しゃ}}　{{Photrans|優|やさ}}しくとらえて
{{Photrans|目|め}}{{Photrans|覚|ざ}}めそうな　{{Photrans|記憶|きおく}}の{{Photrans|欠片|かけら}}
うつむいて　{{Photrans|消|き}}えてほしいと {{Photrans|祈|いの}}るけど

{{Photrans|君|きみ}}が{{Photrans|見|み}}つけてくれた この{{Photrans|声|こえ}}を
{{Photrans|動|うご}}き{{Photrans|出|だ}}した{{Photrans|時計|とけい}}の{{Photrans|針|はり}}
{{Photrans|世界|せかい}}はやがて{{Photrans|色|いろ}}づいて
プラスティックな {{Photrans|心|しん}}が{{Photrans|輝|かがや}}き{{Photrans|出|だ}}すよ
{{Photrans|忘|わす}}れないで　おぼえていて
いつかまた{{Photrans|巡|めぐ}}り{{Photrans|会|あ}}える{{Photrans|日|ひ}}まで
ずっと

```
